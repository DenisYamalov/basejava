<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <title>SetUp</title>
</head>
<body>

<form id="userinfo">
    <div id="test">
        <label for="username_1">Enter your name:</label>
        <input type="text" id="username_1" class="username" name="username" value="Dominic"/>
        <label for="username_2">Enter your name:</label>
        <input type="text" id="username_2" class="username" name="username" value="Dominic"/>
        <label for="username_4">Enter your name:</label>
        <input type="text" id="username_4" class="username" name="username" value="Dominic"/>
    </div>

    <div id="test_2">
        <label for="song">Select an avatar</label>
        <input type="text" id="song" name="song" value="Fallen leafs"/>
        <label for="username_3">Enter your name:</label>
        <input type="text" id="username_3" class="username" name="username" value="Dominic"/>
        <input type="text" class="username" name="username" value="Dominic"/>
        <input type="text" class="username" name="username" value="Dominic"/>
        <input type="text" class="username" name="username" value="Dominic"/>
        <input type="text" class="username" name="username" value="Dominic"/>
    </div>
    <input type="submit" value="Submit"/>
</form>

<script>
    //source https://developer.mozilla.org/en-US/docs/Learn/Forms/Sending_forms_through_JavaScript
    //how count companies https://stackoverflow.com/questions/9681601/how-can-i-count-the-number-of-elements-with-same-class

    const form = document.querySelector("#userinfo");

    async function sendData() {
        // Associate the FormData object with the form element
        let count = $('#test .username').length;
        let secondCounter = $('#test_2 .username').length;
        const formData = new FormData(form);
        formData.append("section", "company");
        formData.append("count", count);
        formData.append("count2", secondCounter);


        try {
            const response = await fetch("https://example.org/post", {
                method: "POST",
                // Set the FormData instance as the request body
                body: formData,
            });
            console.log(await response.json());
            console.log(count)
        } catch (e) {
            console.error(e);
        }
    }

    // Take over form submission
    form.addEventListener("submit", (event) => {
        event.preventDefault();
        sendData();
    });

</script>

</body>
</html>